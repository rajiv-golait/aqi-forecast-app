# AQI Forecast API - Endpoint Reference for Frontend Developers

All endpoints require the header: X-API-KEY: <your_api_key>

---

## Backend Orchestration
- The backend is managed by `run_backend_orchestrator.py`.
- This script keeps the API server always running and schedules all data/ML jobs.
- Job status (timestamp, job, status, error) is logged to `logs/orchestrator_job_status.csv`.
- The Python package `schedule` is required (see README).

---

GET    /                       - API info root
GET    /live/{station_id}        - Real-time AQI for a station
GET    /forecast/available_stations - List all station IDs with forecast data
GET    /forecast/{station_id}    - 3-day AQI forecast for a station
GET    /forecast/{station_id}/summary - Forecast summary for a station
GET    /stations/search          - Search stations by city, state, name (query params: city, state, station_name, limit)
GET    /stations/{station_id}    - Station metadata
GET    /usage                    - API key usage info
POST   /admin/generate_key       - (Admin) Generate API key (requires admin key)
GET    /health                   - API health check
GET    /metadata                 - API metadata and endpoints
POST   /register                 - Register user and get API key (body: {"user_email": "..."})
GET    /history/{station_id}     - Historical AQI for a station (query param: days)
GET    /advisory/{aqi}           - Health advice for AQI value
GET    /advisory/auto/{station_id} - Health advice for a station's AQI
GET    /stations/geojson         - All stations as GeoJSON
POST   /alerts/subscribe         - Subscribe to AQI alerts (body: station_id, user_email)
POST   /alerts/unsubscribe       - Unsubscribe from AQI alerts (body: station_id, user_email)
GET    /alerts/check/{station_id} - Check if AQI exceeds threshold (query param: threshold)
GET    /cities                   - List all cities with stations
GET    /categories               - AQI categories and breakpoints

---

**Headers required for all endpoints:**
X-API-KEY: <your_api_key>

**Example request:**
GET /forecast/{station_id}
Headers: { "X-API-KEY": "your_api_key" }

**For POST endpoints:**
- /register: Body: { "user_email": "your@email.com" }
- /alerts/subscribe, /alerts/unsubscribe: Body: { "station_id": "...", "user_email": "..." }
- /admin/generate_key: Body: { ... }, Header: { "X-API-KEY": "admin_key" } 